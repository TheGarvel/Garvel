<div class="rounded-2xl w-11/12 mx-auto my-8 shadow-2xl bg-white pt-6 md:w-8/12 lg:w-9/12">
  <%= form_for( product, html: {enctype: "multipart/form-data"}) do |form|%>
    <div class="mx-4 m-auto md:ml-10 xl:ml-24">
      <div class="field my-5">
        <%= form.label "商品名稱：", class:"text-gray-500"%>
        <%= form.text_field :name, placeholder:"商品名稱", class:"w-9/12 h-10 border py-1 px-2 focus:border-blue-900 border-gray-300 text-sm font-normal rounded lg:w-10/12"%>
        <% if product.errors[:name].any? %>
          <div class="text-center text-sm text-red-700"><%= product.errors[:name][0] %></div>
        <% end %>
      </div>

      <div class="field flex justify-start my-4 md:my-6">
        <%= form.label "商品描述：", class:"text-gray-500"%>
        <%= form.text_area :description, placeholder:"描述您所銷售的產品，並包含買家可能感興趣的任何細節。用戶們喜歡有故事的產品！", size: "30x6", class:"w-9/12 border py-2 px-2 ml-1 border-gray-300 text-sm font-normal rounded lg:w-10/12"%>
        <% if product.errors[:description].any? %>
          <div class="text-center text-sm text-red-700"><%= product.errors[:description][0] %></div>
        <% end %>
      </div>

      <div class="field my-4 md:my-6 flex items-center">
        <%= form.label "商品分類：", class:"text-gray-500"%>
        <div data-controller="tag"
            data-tags="[<%= product.tags.map{|i|
                                              "\"#{i.name}\""
                                            }.join(",") %> ]">
        </div>

        <div class="field my-5">
          <%= form.label "每標最低金額：", class:"text-gray-800"%>
          <%= form.text_field :basicprice, type:"nunber" ,placeholder:"NT$", class:"text-gray-800 w-full h-10 border py-1 px-2 focus:border-blue-900 border-gray-400 text-sm font-normal rounded"%>
          <% if product.errors[:basicprice].any? %>
            <div class="text-center text-sm text-red-700 "><%= product.errors[:basicprice][0] %></div>
          <% end %>
        </div>

        <div class="bg-white">
          <div class="custom-file-container border" data-upload-id="myFirstImage" data-controller="multipleImg">
          </div>
        </div>

        <div class="status my-5 flex">
          <%= form.label :status, "狀態：", class:"mt-3 ml-8 text-gray-800"%>
          <div class="styled-select", class="text-white">
            <%= form.select :status, Product.all_status, class:"text-blue-500 border py-1 px-2 focus:border-blue-900 border-gray-400 text-sm font-normal rounded"%>
          </div>
        </div>
      </div>

      <div class="actions pt-5 pb-10">
        <% if product.id.present? %>
          <%= form.submit "更新商品", class:"w-11/12 h-11 flex justify-center items-center m-auto bg-blue-600 text-white hover:bg-blue-700 rounded mb-4 cursor-pointer"%>
        <% else %>
          <%= form.submit "立即刊登", class:"w-11/12 h-11 flex justify-center items-center m-auto bg-blue-600 text-white hover:bg-blue-700 rounded mb-4 cursor-pointer"%>
        <% end %>
          <%= link_to '返回上一頁', own_products_path, data: { confirm: '確定要離開嗎？' }, class:"w-11/12 h-11 flex justify-center items-center m-auto border-gray-400 text-gray-900 hover:bg-gray-200 border rounded"%>
      </div>

    </div>
  <% end %>
</div>

<script> //DEBUG用
  function onChangeFunction(event) {
    let fileList = event.target.files;
    console.log("fileList",event,fileList);
  }
</script>
